
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
    <head>
        <title>Simple Query Form</title>
         <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    </head>
    <body>
     <form action="" method="post">
            {{ form.csrf }}

            <div class="input Query">
                {{ form.where_lat.label }} {{ form.where_lat }}
            </div>

          <div class="input Query">
                {{ form.where_lon.label }} {{ form.where_lon }}
            </div>

        <div class="input Query">
                {{ form.solar_angle.label }} {{ form.solar_angle }}
            </div>

            <div class="input submit">
                <input type="submit" value="Submit" />
            </div>


         {% if data != None %}
             <h2>Fixed Solar Panel Calculations</h2>
            {%  for k, v in data.items() %}

                {%  if v["angle"] != None %}
                    <br>
                    <div style="text-align:center">
                        For an angle of {{ v["angle"] }} degrees.
                        <p>Average Efficiency is {{ v["yearavg"] }} %
                        </p>


                    <img src="data:image/png;base64,{{ v["yeardf"] }}">
                     </div>

                {%  endif %}
             {% endfor %}
        {% endif %}

        </form>
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <ul>
                    {% for message in messages %}
                        <li>{{ message[1] }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        {% endwith %}
    </body>
</html>
